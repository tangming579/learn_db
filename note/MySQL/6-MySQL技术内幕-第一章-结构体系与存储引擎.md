### MySQL体系结构

<div>
    <image src="img\4.png"></image>
</div>

MySQL由以下几部分组成：

连接池组件、管理服务和工具组件、SQL接口组件、查询分析器组件、优化器组件、缓冲（Cache）组件、插件式存储引擎、物理文件。

**注意：存储引擎是基于表的，而不是基于数据库**

### MySQL存储引擎

#### InnoDB存储引擎

特点：行锁设计、支持外键、默认读取操作不会产生锁。

InnoDB采用多版本并发控制（MVCC）来获得高并发性，并实现了SQL标准的4中隔离级别。默认为REPEATABLE，同时使用一种被称为next-key locking的策略来避免幻读，除此之外，InnoDB还提供了插入缓冲、二次写、自适应哈希索引、预读等高性能高可用功能。

#### MyISAM

特点：不支持事务、表锁设计、支持全文索引。缓冲池只缓冲索引文件，而不缓冲数据文件。

#### NDB

特点：集群存储引擎

#### MEMORY

特点：数据存在内存中，如果数据库重启或崩溃，数据丢失

Memory存储引擎默认使用哈希索引，而不是B+树索引。

#### Maria

特点：支持缓冲数据和索引文件，支持行级锁，提供了MVCC支持，支持事务和非事务安全选项。